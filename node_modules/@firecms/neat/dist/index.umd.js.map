{"version":3,"file":"index.umd.js","sources":["../src/NeatGradient.ts"],"sourcesContent":["import * as THREE from \"three\";\n\nconst PLANE_WIDTH = 50;\nconst PLANE_HEIGHT = 80;\n\nconst WIREFRAME = true;\nconst COLORS_COUNT = 5;\n\nconst clock = new THREE.Clock();\n\nconst LINK_ID = generateRandomString();\n\ntype SceneState = {\n    renderer: THREE.WebGLRenderer,\n    camera: THREE.Camera,\n    scene: THREE.Scene,\n    meshes: THREE.Mesh[],\n    resolution: number\n}\n\nexport type NeatConfig = {\n    resolution?: number;\n    speed?: number;\n    horizontalPressure?: number;\n    verticalPressure?: number;\n    waveFrequencyX?: number;\n    waveFrequencyY?: number;\n    waveAmplitude?: number;\n    highlights?: number;\n    shadows?: number;\n    colorSaturation?: number;\n    colorBrightness?: number;\n    colors: NeatColor[];\n    colorBlending?: number;\n    grainScale?: number;\n    grainIntensity?: number;\n    grainSpeed?: number;\n    wireframe?: boolean;\n    backgroundColor?: string;\n    backgroundAlpha?: number;\n};\n\nexport type NeatColor = {\n    color: string;\n    enabled: boolean;\n    /**\n     * Value from 0 to 1\n     */\n    influence?: number;\n}\n\nexport type NeatController = {\n    destroy: () => void;\n}\n\nexport class NeatGradient implements NeatController {\n\n    private _ref: HTMLCanvasElement;\n\n    private _speed: number = -1;\n\n    private _horizontalPressure: number = -1;\n    private _verticalPressure: number = -1;\n\n    private _waveFrequencyX: number = -1;\n    private _waveFrequencyY: number = -1;\n    private _waveAmplitude: number = -1;\n\n    private _shadows: number = -1;\n    private _highlights: number = -1;\n    private _saturation: number = -1;\n    private _brightness: number = -1;\n\n    private _grainScale: number = -1;\n    private _grainIntensity: number = -1;\n    private _grainSpeed: number = -1;\n\n    private _colorBlending: number = -1;\n\n    private _colors: NeatColor[] = [];\n    private _wireframe: boolean = false;\n\n    private _backgroundColor: string = \"#FFFFFF\";\n    private _backgroundAlpha: number = 1.0;\n\n    private requestRef: number = -1;\n    private sizeObserver: ResizeObserver;\n    private sceneState: SceneState;\n\n    constructor(config: NeatConfig & { ref: HTMLCanvasElement, resolution?: number, seed?: number }) {\n\n        const {\n            ref,\n            speed = 4,\n            horizontalPressure = 3,\n            verticalPressure = 3,\n            waveFrequencyX = 5,\n            waveFrequencyY = 5,\n            waveAmplitude = 3,\n            colors,\n            highlights = 4,\n            shadows = 4,\n            colorSaturation = 0,\n            colorBrightness = 1,\n            colorBlending = 5,\n            grainScale = 2,\n            grainIntensity = 0.55,\n            grainSpeed = 0.1,\n            wireframe = false,\n            backgroundColor = \"#FFFFFF\",\n            backgroundAlpha = 1.0,\n            resolution = 1,\n            seed\n        } = config;\n\n\n        this._ref = ref;\n\n        this.destroy = this.destroy.bind(this);\n        this._initScene = this._initScene.bind(this);\n        this._buildMaterial = this._buildMaterial.bind(this);\n\n        this.speed = speed;\n        this.horizontalPressure = horizontalPressure;\n        this.verticalPressure = verticalPressure;\n        this.waveFrequencyX = waveFrequencyX;\n        this.waveFrequencyY = waveFrequencyY;\n        this.waveAmplitude = waveAmplitude;\n        this.colorBlending = colorBlending;\n        this.grainScale = grainScale;\n        this.grainIntensity = grainIntensity;\n        this.grainSpeed = grainSpeed;\n        this.colors = colors;\n        this.shadows = shadows;\n        this.highlights = highlights;\n        this.colorSaturation = colorSaturation;\n        this.colorBrightness = colorBrightness;\n        this.wireframe = wireframe;\n        this.backgroundColor = backgroundColor;\n        this.backgroundAlpha = backgroundAlpha;\n\n        this.sceneState = this._initScene(resolution);\n\n        let tick = seed !== undefined ? seed : getElapsedSecondsInLastHour();\n        const render = () => {\n\n            const { renderer, camera, scene, meshes } = this.sceneState;\n            if (Math.floor(tick * 10) % 5 === 0) {\n                addNeatLink(ref);\n            }\n\n            renderer.setClearColor(this._backgroundColor, this._backgroundAlpha);\n            meshes.forEach((mesh) => {\n\n                const width = this._ref.width,\n                    height = this._ref.height;\n\n                const colors = [\n                    ...this._colors.map(color => {\n                        let threeColor = new THREE.Color();\n                        threeColor.setStyle(color.color, \"\");\n                        return ({\n                            is_active: color.enabled,\n                            color: threeColor,\n                            influence: color.influence\n                        });\n                    }),\n                    ...Array.from({ length: COLORS_COUNT - this._colors.length }).map(() => ({\n                        is_active: false,\n                        color: new THREE.Color(0x000000)\n                    }))\n                ];\n\n                tick += clock.getDelta() * this._speed;\n                // @ts-ignore\n                mesh.material.uniforms.u_time.value = tick;\n                // @ts-ignore\n                mesh.material.uniforms.u_resolution = { value: new THREE.Vector2(width, height) };\n                // @ts-ignore\n                mesh.material.uniforms.u_color_pressure = { value: new THREE.Vector2(this._horizontalPressure, this._verticalPressure) };\n                // @ts-ignore\n                mesh.material.uniforms.u_wave_frequency_x = { value: this._waveFrequencyX };\n                // @ts-ignore\n                mesh.material.uniforms.u_wave_frequency_y = { value: this._waveFrequencyY };\n                // @ts-ignore\n                mesh.material.uniforms.u_wave_amplitude = { value: this._waveAmplitude };\n                // @ts-ignore\n                mesh.material.uniforms.u_plane_width = { value: PLANE_WIDTH };\n                // @ts-ignore\n                mesh.material.uniforms.u_plane_height = { value: PLANE_HEIGHT };\n                // @ts-ignore\n                mesh.material.uniforms.u_color_blending = { value: this._colorBlending };\n                // @ts-ignore\n                mesh.material.uniforms.u_colors = { value: colors };\n                // @ts-ignore\n                mesh.material.uniforms.u_colors_count = { value: COLORS_COUNT };\n                // @ts-ignore\n                mesh.material.uniforms.u_shadows = { value: this._shadows };\n                // @ts-ignore\n                mesh.material.uniforms.u_highlights = { value: this._highlights };\n                // @ts-ignore\n                mesh.material.uniforms.u_saturation = { value: this._saturation };\n                // @ts-ignore\n                mesh.material.uniforms.u_brightness = { value: this._brightness };\n                // @ts-ignore\n                mesh.material.uniforms.u_grain_intensity = { value: this._grainIntensity };\n                // @ts-ignore\n                mesh.material.uniforms.u_grain_speed = { value: this._grainSpeed };\n                // @ts-ignore\n                mesh.material.uniforms.u_grain_scale = { value: this._grainScale };\n                // @ts-ignore\n                mesh.material.wireframe = this._wireframe;\n            });\n\n            renderer.render(scene, camera);\n            this.requestRef = requestAnimationFrame(render);\n        };\n\n        const setSize = () => {\n\n            const { renderer } = this.sceneState;\n            const canvas = renderer.domElement;\n            const width = canvas.clientWidth;\n            const height = canvas.clientHeight;\n\n            this.sceneState.renderer.setSize(width, height, false);\n            updateCamera(this.sceneState.camera, width, height);\n        };\n\n        this.sizeObserver = new ResizeObserver(entries => {\n            setSize();\n        });\n\n        this.sizeObserver.observe(ref);\n\n\n        render();\n    }\n\n    destroy() {\n        if (this) {\n            cancelAnimationFrame(this.requestRef);\n            this.sizeObserver.disconnect();\n        }\n    }\n\n    set speed(speed: number) {\n        this._speed = speed / 20;\n    }\n\n    set horizontalPressure(horizontalPressure: number) {\n        this._horizontalPressure = horizontalPressure / 4;\n    }\n\n    set verticalPressure(verticalPressure: number) {\n        this._verticalPressure = verticalPressure / 4;\n    }\n\n    set waveFrequencyX(waveFrequencyX: number) {\n        this._waveFrequencyX = waveFrequencyX * 0.04;\n    }\n\n    set waveFrequencyY(waveFrequencyY: number) {\n        this._waveFrequencyY = waveFrequencyY * 0.04;\n    }\n\n    set waveAmplitude(waveAmplitude: number) {\n        this._waveAmplitude = waveAmplitude * .75;\n    }\n\n    set colors(colors: NeatColor[]) {\n        this._colors = colors;\n    }\n\n    set highlights(highlights: number) {\n        this._highlights = highlights / 100;\n    }\n\n    set shadows(shadows: number) {\n        this._shadows = shadows / 100;\n    }\n\n    set colorSaturation(colorSaturation: number) {\n        this._saturation = colorSaturation / 10;\n    }\n\n    set colorBrightness(colorBrightness: number) {\n        this._brightness = colorBrightness;\n    }\n\n    set colorBlending(colorBlending: number) {\n        this._colorBlending = colorBlending / 10;\n    }\n\n    set grainScale(grainScale: number) {\n        this._grainScale = grainScale == 0 ? 1 : grainScale;\n    }\n\n    set grainIntensity(grainIntensity: number) {\n        this._grainIntensity = grainIntensity;\n    }\n\n    set grainSpeed(grainSpeed: number) {\n        this._grainSpeed = grainSpeed;\n    }\n\n    set wireframe(wireframe: boolean) {\n        this._wireframe = wireframe;\n    }\n\n    set resolution(resolution: number) {\n        this.sceneState = this._initScene(resolution);\n    }\n\n    set backgroundColor(backgroundColor: string) {\n        this._backgroundColor = backgroundColor;\n    }\n\n    set backgroundAlpha(backgroundAlpha: number) {\n        this._backgroundAlpha = backgroundAlpha;\n    }\n\n    _initScene(resolution: number): SceneState {\n\n        const width = this._ref.width,\n            height = this._ref.height;\n\n        const renderer = new THREE.WebGLRenderer({\n            // antialias: true,\n            alpha: true,\n            canvas: this._ref\n        });\n\n        renderer.setClearColor(0xFF0000, .5);\n        renderer.setSize(width, height, false);\n\n        const meshes: THREE.Mesh[] = [];\n\n        const scene = new THREE.Scene();\n\n        const material = this._buildMaterial(width, height);\n\n        const geo = new THREE.PlaneGeometry(PLANE_WIDTH, PLANE_HEIGHT, 240 * resolution, 240 * resolution);\n        const plane = new THREE.Mesh(geo, material);\n        plane.rotation.x = -Math.PI / 3.5;\n        plane.position.z = -1;\n        meshes.push(plane);\n        scene.add(plane);\n\n        const camera = new THREE.OrthographicCamera(0.0, 0.0, 0.0, 0.0, 0.0, 0.0);\n        // const camera = new THREE.PerspectiveCamera( 1000, window.innerWidth / window.innerHeight, 1, 1000000 );\n        camera.position.z = 5;\n        updateCamera(camera, width, height);\n\n        return {\n            renderer,\n            camera,\n            scene,\n            meshes,\n            resolution\n        };\n    }\n\n    _buildMaterial(width: number, height: number) {\n\n        const colors = [\n            ...this._colors.map(color => ({\n                is_active: color.enabled,\n                color: new THREE.Color(color.color),\n                influence: color.influence\n            })),\n            ...Array.from({ length: COLORS_COUNT - this._colors.length }).map(() => ({\n                is_active: false,\n                color: new THREE.Color(0x000000)\n            }))\n        ];\n\n        const uniforms = {\n            u_time: { value: 0 },\n            u_color_pressure: { value: new THREE.Vector2(this._horizontalPressure, this._verticalPressure) },\n            u_wave_frequency_x: { value: this._waveFrequencyX },\n            u_wave_frequency_y: { value: this._waveFrequencyY },\n            u_wave_amplitude: { value: this._waveAmplitude },\n            u_resolution: { value: new THREE.Vector2(width, height) },\n            u_colors: { value: colors },\n            u_colors_count: { value: this._colors.length },\n            u_plane_width: { value: PLANE_WIDTH },\n            u_plane_height: { value: PLANE_HEIGHT },\n            u_shadows: { value: this._shadows },\n            u_highlights: { value: this._highlights },\n            u_grain_intensity: { value: this._grainIntensity },\n            u_grain_scale: { value: this._grainScale },\n            u_grain_speed: { value: this._grainSpeed },\n        };\n\n        const material = new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            vertexShader: buildUniforms() + buildNoise() + buildColorFunctions() + buildVertexShader(),\n            fragmentShader: buildUniforms() + buildColorFunctions() + buildNoise() + buildFragmentShader()\n        });\n\n        material.wireframe = WIREFRAME;\n        return material;\n    }\n\n\n}\n\nfunction updateCamera(camera: THREE.Camera, width: number, height: number) {\n\n    const viewPortAreaRatio = 1000000;\n    const areaViewPort = width * height;\n    const targetPlaneArea =\n        areaViewPort / viewPortAreaRatio *\n        PLANE_WIDTH * PLANE_HEIGHT / 1.5;\n\n    const ratio = width / height;\n\n    const targetWidth = Math.sqrt(targetPlaneArea * ratio);\n    const targetHeight = targetPlaneArea / targetWidth;\n\n    const left = -PLANE_WIDTH / 2;\n    const right = Math.min((left + targetWidth) / 1.5, PLANE_WIDTH / 2);\n\n    const top = PLANE_HEIGHT / 4;\n    const bottom = Math.max((top - targetHeight) / 2, -PLANE_HEIGHT / 4);\n\n    const near = -100;\n    const far = 1000;\n    if (camera instanceof THREE.OrthographicCamera) {\n        camera.left = left;\n        camera.right = right;\n        camera.top = top;\n        camera.bottom = bottom;\n        camera.near = near;\n        camera.far = far;\n        camera.updateProjectionMatrix();\n    } else if (camera instanceof THREE.PerspectiveCamera) {\n        camera.aspect = width / height;\n        camera.updateProjectionMatrix();\n    }\n\n}\n\n\nfunction buildVertexShader() {\n    return `\n\nvoid main() {\n\n    vUv = uv;\n\n    v_displacement_amount = cnoise( vec3(\n        u_wave_frequency_x * position.x + u_time,\n        u_wave_frequency_y * position.y + u_time,\n        u_time\n    ));\n    \n    vec3 color;\n\n    // float t = mod(u_base_color, 100.0);\n    color = u_colors[0].color;\n    \n    vec2 noise_cord = vUv * u_color_pressure;\n    \n    const float minNoise = .0;\n    const float maxNoise = .9;\n    \n    for (int i = 1; i < u_colors_count; i++) {\n    \n        if(u_colors[i].is_active == 1.0){\n            float noiseFlow = (1. + float(i)) / 30.;\n            float noiseSpeed = (1. + float(i)) * 0.11;\n            float noiseSeed = 13. + float(i) * 7.;\n            \n            int reverseIndex = u_colors_count - i;\n            \n            float noise = snoise(\n                vec3(\n                    noise_cord.x * u_color_pressure.x + u_time * noiseFlow * 2.,\n                    noise_cord.y * u_color_pressure.y,\n                    u_time * noiseSpeed\n                ) + noiseSeed\n            ) - (.1 * float(i)) + (.5 * u_color_blending);\n            \n            noise = clamp(minNoise, maxNoise + float(i) * 0.02, noise);\n            vec3 nextColor = u_colors[i].color;\n            color = mix(color, nextColor, smoothstep(0.0, u_color_blending, noise));\n            \n            // vec3 colorOklab = oklab2rgb(color);\n            // vec3 nextColorOklab = oklab2rgb(nextColor);\n            // vec3 mixColor = mix(colorOklab, nextColorOklab, smoothstep(0.0, u_color_blending, noise));\n            // color = rgb2oklab(mixColor);\n            \n        }\n        \n    }\n    \n    v_color = color;\n    \n    vec3 newPosition = position + normal * v_displacement_amount * u_wave_amplitude;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\n    \n    v_new_position = gl_Position;\n}\n`;\n}\n\nfunction buildFragmentShader() {\n    return `\nfloat random(vec2 p) {\n    return fract(sin(dot(p, vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat fbm(vec3 x) {\n    float value = 0.0;\n    float amplitude = 0.5;\n    float frequency = 1.0;\n\n    for (int i = 0; i < 4; i++) {\n        value += amplitude * snoise(x * frequency);\n        frequency *= 2.0;\n        amplitude *= 0.5;\n    }\n    return value;\n}\n    \nvoid main(){\n    vec3 color = v_color;\n    \n    color += pow(v_displacement_amount, 1.0) * u_highlights;\n    color -= pow(1.0 - v_displacement_amount, 2.0) * u_shadows;\n    color = saturation(color, 1.0 + u_saturation);\n    color = color * u_brightness;\n    \n    // Generate grain using fbm\n    vec2 noiseCoords = gl_FragCoord.xy / u_grain_scale;\n\n    float grain = (u_grain_speed != 0.0) \n        ? fbm(vec3(noiseCoords, u_time * u_grain_speed)) \n        : fbm(vec3(noiseCoords, 0.0));\n\n    // Center the grain around zero\n    grain = grain * 0.5 + 0.5;\n    grain -= 0.5;\n\n    // Apply grain intensity\n    grain *= u_grain_intensity;\n\n    // Add grain to color\n    color += vec3(grain);\n            \n    gl_FragColor = vec4(color,1.0);\n}\n`;\n}\n\nconst buildUniforms = () => `\nprecision highp float;\n\nstruct Color {\n    float is_active;\n    vec3 color;\n    float value;\n};\n\nuniform float u_grain_intensity; \nuniform float u_grain_scale; \nuniform float u_grain_speed; \nuniform float u_time;\n\nuniform float u_wave_amplitude;\nuniform float u_wave_frequency_x;\nuniform float u_wave_frequency_y;\n\nuniform vec2 u_color_pressure;\n\nuniform float u_plane_width;\nuniform float u_plane_height;\n\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_saturation;\nuniform float u_brightness;\n\nuniform float u_color_blending;\n\nuniform int u_colors_count;\nuniform Color u_colors[5];\nuniform vec2 u_resolution;\n\nvarying vec2 vUv;\nvarying vec4 v_new_position;\nvarying vec3 v_color;\nvarying float v_displacement_amount;\n\n    `;\n\nconst buildNoise = () => `\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\nfloat snoise(vec3 v)\n{\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n            i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n          + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n          + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n// YUV to RGB matrix\nmat3 yuv2rgb = mat3(1.0, 0.0, 1.13983,\n                    1.0, -0.39465, -0.58060,\n                    1.0, 2.03211, 0.0);\n\n// RGB to YUV matrix\nmat3 rgb2yuv = mat3(0.2126, 0.7152, 0.0722,\n                    -0.09991, -0.33609, 0.43600,\n                    0.615, -0.5586, -0.05639);\n                    \nvec3 oklab2rgb(vec3 linear)\n{\n    const mat3 im1 = mat3(0.4121656120, 0.2118591070, 0.0883097947,\n                          0.5362752080, 0.6807189584, 0.2818474174,\n                          0.0514575653, 0.1074065790, 0.6302613616);\n                       \n    const mat3 im2 = mat3(+0.2104542553, +1.9779984951, +0.0259040371,\n                          +0.7936177850, -2.4285922050, +0.7827717662,\n                          -0.0040720468, +0.4505937099, -0.8086757660);\n                       \n    vec3 lms = im1 * linear;\n            \n    return im2 * (sign(lms) * pow(abs(lms), vec3(1.0/3.0)));\n}\n\nvec3 rgb2oklab(vec3 oklab)\n{\n    const mat3 m1 = mat3(+1.000000000, +1.000000000, +1.000000000,\n                         +0.396337777, -0.105561346, -0.089484178,\n                         +0.215803757, -0.063854173, -1.291485548);\n                       \n    const mat3 m2 = mat3(+4.076724529, -1.268143773, -0.004111989,\n                         -3.307216883, +2.609332323, -0.703476310,\n                         +0.230759054, -0.341134429, +1.706862569);\n    vec3 lms = m1 * oklab;\n    \n    return m2 * (lms * lms * lms);\n}\n\n    `;\n\nconst buildColorFunctions = () => `\n\nvec3 saturation(vec3 rgb, float adjustment) {\n    const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    vec3 intensity = vec3(dot(rgb, W));\n    return mix(intensity, rgb, adjustment);\n}\n\nfloat saturation(vec3 rgb)\n{\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(rgb.bg, K.wz), vec4(rgb.gb, K.xy), step(rgb.b, rgb.g));\n    vec4 q = mix(vec4(p.xyw, rgb.r), vec4(rgb.r, p.yzx), step(p.x, rgb.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return abs(6.0 * d + e);\n}\n\n// get saturation of a color in values between 0 and 1\nfloat getSaturation(vec3 color) {\n    float max = max(color.r, max(color.g, color.b));\n    float min = min(color.r, min(color.g, color.b));\n    return (max - min) / max;\n}\n    \nvec3 rgb2hsv(vec3 c)\n{\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n`;\n\n\nconst setLinkStyles = (link: HTMLAnchorElement) => {\n    link.id = LINK_ID;\n    link.href = \"https://neat.firecms.co\";\n    link.target = \"_blank\";\n    link.style.position = \"absolute\";\n    link.style.display = \"block\";\n    link.style.bottom = \"0\";\n    link.style.right = \"0\";\n    link.style.padding = \"10px\";\n    link.style.color = \"#dcdcdc\";\n    link.style.opacity = \"0.8\";\n    link.style.fontFamily = \"sans-serif\";\n    link.style.fontSize = \"16px\";\n    link.style.fontWeight = \"bold\";\n    link.style.textDecoration = \"none\";\n    link.style.zIndex = \"10000\";\n    link.innerHTML = \"NEAT\";\n}\n\nconst addNeatLink = (ref: HTMLCanvasElement) => {\n    const existingLinks = ref.parentElement?.getElementsByTagName(\"a\");\n    if (existingLinks) {\n        for (let i = 0; i < existingLinks.length; i++) {\n            if (existingLinks[i].id === LINK_ID) {\n                setLinkStyles(existingLinks[i]);\n                return;\n            }\n        }\n    }\n    const link = document.createElement(\"a\");\n    setLinkStyles(link);\n    ref.parentElement?.appendChild(link);\n}\n\nfunction getElapsedSecondsInLastHour() {\n    const now = new Date();\n    const minutes = now.getMinutes();\n    const seconds = now.getSeconds();\n    return (minutes * 60) + seconds;\n}\n\nfunction generateRandomString(length: number = 6): string {\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let result = '';\n    for (let i = 0; i < length; i++) {\n        const randomIndex = Math.floor(Math.random() * characters.length);\n        result += characters.charAt(randomIndex);\n    }\n    return result;\n}\n"],"names":["PLANE_WIDTH","PLANE_HEIGHT","WIREFRAME","COLORS_COUNT","clock","THREE","LINK_ID","generateRandomString","NeatGradient","config","ref","speed","horizontalPressure","verticalPressure","waveFrequencyX","waveFrequencyY","waveAmplitude","colors","highlights","shadows","colorSaturation","colorBrightness","colorBlending","grainScale","grainIntensity","grainSpeed","wireframe","backgroundColor","backgroundAlpha","resolution","seed","tick","getElapsedSecondsInLastHour","render","renderer","camera","scene","meshes","addNeatLink","mesh","width","height","color","threeColor","setSize","canvas","updateCamera","entries","material","geo","plane","uniforms","buildUniforms","buildNoise","buildColorFunctions","buildVertexShader","buildFragmentShader","targetPlaneArea","ratio","targetWidth","targetHeight","left","right","top","bottom","near","far","setLinkStyles","link","existingLinks","i","now","minutes","seconds","length","characters","result","randomIndex"],"mappings":"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BC,EAAa,IAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAoNnBC,EAAsB,IAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA8C5Ba,EAAiBC,GAA4B,CAC/CA,EAAK,GAAK9D,EACV8D,EAAK,KAAO,0BACZA,EAAK,OAAS,SACdA,EAAK,MAAM,SAAW,WACtBA,EAAK,MAAM,QAAU,QACrBA,EAAK,MAAM,OAAS,IACpBA,EAAK,MAAM,MAAQ,IACnBA,EAAK,MAAM,QAAU,OACrBA,EAAK,MAAM,MAAQ,UACnBA,EAAK,MAAM,QAAU,MACrBA,EAAK,MAAM,WAAa,aACxBA,EAAK,MAAM,SAAW,OACtBA,EAAK,MAAM,WAAa,OACxBA,EAAK,MAAM,eAAiB,OAC5BA,EAAK,MAAM,OAAS,QACpBA,EAAK,UAAY,MACrB,EAEM9B,EAAe5B,GAA2B,CAC5C,MAAM2D,EAAgB3D,EAAI,eAAe,qBAAqB,GAAG,EACjE,GAAI2D,GACA,QAASC,EAAI,EAAGA,EAAID,EAAc,OAAQC,IAClC,GAAAD,EAAcC,GAAG,KAAOhE,EAAS,CACjC6D,EAAcE,EAAcC,EAAE,EAC9B,MACJ,EAGF,MAAAF,EAAO,SAAS,cAAc,GAAG,EACvCD,EAAcC,CAAI,EACd1D,EAAA,eAAe,YAAY0D,CAAI,CACvC,EAEA,SAASpC,GAA8B,CAC7B,MAAAuC,EAAM,IAAI,KACVC,EAAUD,EAAI,aACdE,EAAUF,EAAI,aACpB,OAAQC,EAAU,GAAMC,CAC5B,CAEA,SAASlE,EAAqBmE,EAAiB,EAAW,CACtD,MAAMC,EAAa,iEACnB,IAAIC,EAAS,GACb,QAASN,EAAI,EAAGA,EAAII,EAAQJ,IAAK,CAC7B,MAAMO,EAAc,KAAK,MAAM,KAAK,SAAWF,EAAW,MAAM,EACtDC,GAAAD,EAAW,OAAOE,CAAW,CAC3C,CACO,OAAAD,CACX"}